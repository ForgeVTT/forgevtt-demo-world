{"_id":"0eJuInUqpDydydpm","name":"Tiles","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const tile_id = args[0];\nawait new Promise(r => setTimeout(r, 30000))\n// Hide it\ncanvas.scene.updateEmbeddedEntity(\"Tile\", {_id: tile_id, hidden: true});\n// Show tile \ncanvas.scene.updateEmbeddedEntity(\"Tile\", {_id: tile_id, hidden: false});\n// Wait 30 seconds\nawait new Promise(r => setTimeout(r, 30000))\n// Hide it\ncanvas.scene.updateEmbeddedEntity(\"Tile\", {_id: tile_id, hidden: true});","folder":null,"sort":4900000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"1LahHMOx3i1IJaYG","name":"Proceed hp remove","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"game.scenes.entities.find(s => s.name === \"Combat training\").updateEmbeddedEntity('Token', {_id: \"ASg1X4ANVR7LoawN\", \"bar1.attribute\": \"\", \"bar2.attribute\": \"\", \"displayName\": CONST.TOKEN_DISPLAY_MODES.ALWAYS, \"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS})","folder":null,"sort":1600000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"1MLBs5noc8v6L1oY","name":"Test","type":"script","author":"7dnqGCP7V37vnFvy","img":"icons/svg/dice-target.svg","scope":"global","command":"// Get argument for weapon name\n// TODO remember to reset the HP of the target when you enter this scene\nChatMessage.create(\n    {\n        flavor: \"pop\",\n        content: \"Bam\",\n        buttons: {\n            button:{\n                label: \"Attack\", \n                callback: async () => {\n                    let ro = game.actors.find(x=>x.name===\"Ro\");\n                    let axe = ro.data.items.find(x=>x.name===\"Battleaxe\"); // Reference arg for weapon name\n                    let myDmg = await axe.rollDamage();\n                    let dmgTotal = myDmg.total;\n                    \n                    console.log(`Did ${dmgTotal} damage!`);\n                    \n                    let targetToken = game?.user?.targets?.first();\n                    if (!targetToken) return; // Optionally, tell the user to select target\n                    await targetToken.actor.applyDamage(dmgTotal);\n                    \n                    let targetHp = targetToken?.actor?.data?.data?.attributes?.hp;\n                    if (!targetHp) return;\n                    if (targetHp.value <= targetHp.min) {\n                        console.log(\"Target died!\");\n                        const macro = game.macros.getName(\"Dialog Wizard\");\n                        macro.execute(\"You hit them!\", `/goto-scene \"Bandit Fight 3\"`);\n                    }\n                }\n            }\n        }\n    })","folder":"bHVMMWIpvzR8uKku","sort":0,"permission":{"default":0,"7dnqGCP7V37vnFvy":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"2xkHw3dHZKCV4IQu","name":"Render Store Compendium","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.packs.get(\"world.store\").render(true);","folder":null,"sort":1700000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Render Store Compendium","colour":"#ff0000","trigger":""}}}}
{"_id":"30XQXYnXkmvFPXJv","name":"Roll20","type":"chat","author":"K3zvZ0XBc31fJO8i","img":"icons/svg/dice-target.svg","scope":"global","command":"/roll 1d20","folder":null,"sort":7200000,"permission":{"K3zvZ0XBc31fJO8i":3},"flags":{}}
{"_id":"4aUMx41pvnZCJ52b","name":"teleport","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"// This macro requires the advanced macros of Furnace\r\n// This macro depends on /move-token\r\n// Takes X and Y as arguments\r\n\r\nconst macro = game.macros.entities.find(m => m.name === \"move-token\");\r\nif (!macro) {\r\n  ui.notifications.error(\"This macro depends on the 'move-token' macro, which could not be found.\");\r\n  return;\r\n}\r\nmacro.execute(args[0], args[1], true);","folder":null,"sort":7300000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"5Oznbk1ey2qIwFAP","name":"Piano4","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.play({src: \"worlds/forgevtt-demo-world/Assets/Music/Piano/Piano4.mp3\"});","folder":null,"sort":5100000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"5e3uao6Rav55ZCra","name":"StartPatrol","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"TP.tokenPatroller.startPatrol(\"2\", \"sN5QT4ada1q4pydD\")","folder":null,"sort":1800000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"5nTx5uXUju0a0orn","name":"Piano6","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.play({src: \"worlds/forgevtt-demo-world/Assets/Music/Piano/Piano6.mp3\"}, args[1]);","folder":null,"sort":5300000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"5qh5L9R3NK7c6zwk","name":"Pan","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"/* Pan the camera to the X, Y and scale positions.\n * See the 'pan-camera' macro for more details.\n * The first argument is the duration in milliseconds for the panning animation\n * The second argument is X, third argument is Y and fourth argument is the zoom level\n * Example: /animate-pan 500 1500 1500 0.5\n */\n\ncanvas.animatePan({duration: args[0], x: args[1], y: args[2], scale: args[3]})","folder":null,"sort":5000000,"permission":{"default":0,"PEJBB2AYKoE5ZuxD":3,"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"6Gnw0gQuFh85TUUu","name":"Orc","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const journal = game.journal.entities.find(j => j.name === \"Orcing\")\r\nif (journal) {\r\n  new Dialog({content: journal.data.content,\r\n            buttons: {ok: {label: \"Nice Talking\"}}}).render(true)\r\n}","folder":null,"sort":5400000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"7QaDvYtztyBVX4Ah","name":"Piano3","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.play({src: \"worlds/forgevtt-demo-world/Assets/Music/Piano/Piano3.mp3\"}, args[1]);","folder":null,"sort":5500000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"7WcvmtDW9Kz5wckp","name":"New Macro","type":"script","author":"B4Q4YchnrSySSpaW","img":"icons/svg/dice-target.svg","scope":"global","command":"if (game.paused) game.togglePause()","folder":null,"sort":1900000,"permission":{"default":0,"B4Q4YchnrSySSpaW":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"7g5Bw4kquOY7sr7j","name":"Open Dialog","type":"script","author":"8pIGCEozfXNtPyHL","img":"icons/svg/dice-target.svg","scope":"global","command":"const journal = game.journal.entities.find(j => j.name === canvas.scene.name)\r\nif (journal) {\r\n  new Dialog({content: journal.data.content,\r\n            buttons: {ok: {label: \"ok\"}}}).render(true)\r\n}","folder":null,"sort":11200000,"permission":{"8pIGCEozfXNtPyHL":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"9AYqEIE5L3IrSqGZ","name":"CanvasPanInterfaceOld","type":"script","author":"8pIGCEozfXNtPyHL","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.animatePan({duration: 2500, x: 4000, y: 2000, scale: 0.3})\nawait new Promise(r => setTimeout(r, 4400));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 3000, y: 720, scale: 0.7})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 2020, y: 1250, scale: 0.9})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 1800, y: 2800, scale: 0.8})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 3300, y: 3200, scale: 0.8})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 5400, y: 1120, scale: 0.5})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 3520, y: 2080, scale: 0.6})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 2500, x: 4000, y: 2000, scale: 0.3})\nawait new Promise(r => setTimeout(r, 4400));\nconst macro = game.macros.getName(\"Dialog Wizard\");\nreturn macro.execute(\"Interface - Overview End\", `/goto-scene \"Interface - Navigation Bar\"`);","folder":null,"sort":11300000,"permission":{"default":0,"8pIGCEozfXNtPyHL":3},"flags":{"furnace":{"runAsGM":false},"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"CanvasPanInterface","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"9L1QcQpE6Ai8Fqi2","name":"Piano7","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.play({src: \"worlds/forgevtt-demo-world/Assets/Music/Piano/Piano7.mp3\"}, args[1]);","folder":null,"sort":5600000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"9VWJYWxee8J4MP1j","name":"Piano2","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.play({src: \"worlds/forgevtt-demo-world/Assets/Music/Piano/Piano2.mp3\"}, args[1]);","folder":null,"sort":5700000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"9nSsInN6YyMQArGo","name":"Attack Target Token Automate","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"// Attack Target Token Automate\nwindow.forge = window.forge || {};\nwindow.forge.demoWorld = window.forge.demoWorld || {};\nwindow.forge.demoWorld.roWeapon = args[0];\nconst targetToken = window.forge.demoWorld.roTarget = game?.user?.targets?.first();\nconst popFlexibleDialog = game.macros.find(x => x.name === `PopFlexibleDialog`);\nif (!popFlexibleDialog) console.error(\"Missing macro PopFlexibleDialog\");\n\nif (targetToken?.data?.actorId !== \"Voo7V2dvjq8OB72O\") {\n    popFlexibleDialog.execute(JSON.stringify({\n        content: `<h3 style=\"text-align: center;\">Please select a${!targetToken?.data?.actorId ? '' : ' closer'} target!</h3>`,\n        buttons: {ok: {label: \"Ok\"}}\n    }));\n    window.forge.demoWorld.roTarget = null;\n} else {\n    popFlexibleDialog.execute(JSON.stringify({\n        content: `<h3 style=\\\"text-align: center;\\\">${args[1] || 'Check the chat!'}</h3>`,\n        buttons: {ok: {label: \"Ok\"}}\n    }));\n    ui.sidebar.activateTab('chat');\n    ui.sidebar.expand();\n\n    ChatMessage.create({\n        flavor: `<div class=\"bootleg-item-card\"><img src=\"${window.forge?.demoWorld?.roWeapon.data?.img}\" width=\"50px\" height=\"50px\" /><h3>${window.forge?.demoWorld?.roWeapon.data?.name}</h3></div>`,\n        content: \"<br /><h3 style=\\\"text-align:center\\\">Make an attack with your weapon!</h3><br />\",\n        buttons: {\n            button: {\n                intendedCanvas: \"hello\",\n                label: \"Attack\",\n                callback: async () => {\n                    if (game.userId !== this.user.id) {\n                        ChatMessage.create({\n                            content: \"This button does not belong to you.\",\n                            whisper: [game.userId]\n                        })\n                        return;\n                    }\n                    if (canvas.scene.id !== 'qE9GgC174smk0aPF') {\n                        ChatMessage.create({\n                            content: \"This is not the correct scene for that.\",\n                            whisper: [game.userId]\n                        })\n                        return;\n                    }\n                    await this.delete();\n                    if (!window.forge?.demoWorld?.roWeapon\n                        || window.forge?.demoWorld?.roTarget?.data?.actorId !== \"Voo7V2dvjq8OB72O\") {\n                        ChatMessage.create({\n                            content: \"Please click on the weapon icon in your inventory first.\",\n                            whisper: [game.userId]\n                        })\n                        return;\n                    }\n                    const weapon = window.forge?.demoWorld?.roWeapon;\n                    if (weapon.hasAttack) await weapon.rollAttack();\n                    if (!weapon.hasDamage) {\n                        ChatMessage.create({\n                            content: \"Please select a weapon that can deal some damage!\",\n                            whisper: [game.userId]\n                        })\n                        return;\n                    }\n                    ChatMessage.create({\n                        flavor: `<div class=\"bootleg-item-card\"><img src=\\\"${weapon.data?.img}\\\" width=\\\"50px\\\" height=\\\"50px\\\" /><h3>${weapon.data?.name}</h3></div>`,\n                        content: \"<br /><h3 style=\\\"text-align:center\\\">You hit them! Go ahead and roll damage.</h3><br />\",\n                        buttons: {\n                            button: {\n                                label: \"Damage\",\n                                callback: async () => {\n                                    if (game.userId !== this.user.id) {\n                                        ChatMessage.create({\n                                            content: \"This button does not belong to you.\",\n                                            whisper: [game.userId]\n                                        })\n                                        return;\n                                    }\n                                    if (canvas.scene.id !== 'qE9GgC174smk0aPF') {\n                                        ChatMessage.create({\n                                            content: \"This is not the correct scene for that.\",\n                                            whisper: [game.userId]\n                                        })\n                                        return;\n                                    }\n                                    await this.delete();\n                                    if (!window.forge?.demoWorld?.roWeapon\n                                        || window.forge?.demoWorld?.roTarget?.data?.actorId !== \"Voo7V2dvjq8OB72O\") {\n                                        ChatMessage.create({\n                                            content: \"Please click on the weapon icon in your inventory first.\",\n                                            whisper: [game.userId]\n                                        })\n                                        return;\n                                    }\n                                    const weapon = window.forge?.demoWorld?.roWeapon;\n                                    const targetToken = window.forge?.demoWorld?.roTarget;\n                                    let myDmg = await weapon.rollDamage();\n                                    let dmgTotal = myDmg.total;\n                                    await targetToken.actor.applyDamage(dmgTotal);\n                                    let targetHp = targetToken?.actor?.data?.data?.attributes?.hp;\n                                    if (!targetHp) return;\n                                    if (targetHp.value <= targetHp.min) {\n                                        console.log(\"Target died!\");\n                                        const macro = game.macros.getName(\"Dialog Wizard\");\n                                        macro.execute(\"You hit them!\", `/goto-scene \"Bandit Fight 3\"`);\n                                    } else {\n                                        const attackMacro = game.macros.find(x => x.name === `Attack Target Token Automate`);\n                                        attackMacro.execute(window.forge.demoWorld.roWeapon, `You've done <b style=\"color: darkred\">${dmgTotal}</b> damage but your target is still up, hit them again!`)\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n            }\n        }\n    });\n}","folder":null,"sort":100000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":true}}}
{"_id":"9npqX6q7yCD4d77Q","name":"Delete drawings","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.drawings.deleteMany(canvas.drawings.placeables.filter(p => p.data.author == game.user.id).map(o => o.id))","folder":null,"sort":7400000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"AXQXFsm8aaxB54ZL","name":"Deletion macro","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const nonSceneTokens = canvas.tokens.placeables.filter(t => !t.getFlag(\"world\", \"dontTouch\"));\r\nnonSceneTokens.forEach(token => token.delete());\r\nawait game.scenes.entities.find(s => s.name === \"Combat training (Copy)2\").view()\r\nnonSceneTokens.forEach(t => Token.create(duplicate(t.data)));","folder":null,"sort":7500000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"B9KPd5dMDxl7aNqX","name":"Item 2 Drag & drop","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"const journal = game.journal.entities.find(j => j.name === \"Drag and drop\")\nif (journal) {\n  new Dialog({content: journal.data.content,\n            buttons: {ok: {label: \"Ok\"}}}).render(true)\n}","folder":null,"sort":5200000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"FBxSCo7Fdh57mB1E","name":"testing create","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"ChatMessage.create({\n    content: `<button class=\"my-custom-button\" onClick=console.log(\"hello\")>Do thing</button>`\n})","folder":null,"sort":200000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"FKgIcdhJbdjszwNf","name":"Video","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"$('#camera-views') .video-container::before {\n  content: \"\";\n  display: block;\n  padding-bottom: calc(20% * 3/4);\n};","folder":null,"sort":2000000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Video","colour":"#ff0000","trigger":""}},"furnace":{"runAsGM":true}}}
{"_id":"FfTspU5axYPNbZwX","name":"Say Hello","type":"chat","author":"C1GNSE5IZhabGc9n","img":"icons/svg/dice-target.svg","scope":"global","command":"Woah, relax, no, you're not seeing double!  The background of this scene shows you what Foundry VTT interface should look like","folder":null,"sort":11000000,"permission":{},"flags":{}}
{"_id":"GMLOqyrGVvEd5kvh","name":"Dialog Wizard","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const journalName = args[0];\nconst next = args[1];\n\nconst journal = game.journal.find(j => j.name === journalName)\nif (journal) {\n  const buttons = {};\n  if (next) {\n    buttons[\"Next\"] = {label: \"Next\", callback: () => {\n        ChatMessage.create({content: next})\n    }};\n  } else {\n    buttons[\"ok\"] = {label: \"Close\"};\n  }\n  new Dialog({\n     content: journal.data.content, \n     buttons: {ok: {label: next ? \"Next\": \"Close\"}},\n     close: next ? () => ChatMessage.create({content: next}) : undefined\n   }).render(true)\n}","folder":null,"sort":10800000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"GjSEuKBrsMpqGaRG","name":"Jack","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const journal = game.journal.entities.find(j => j.name === \"Jack\")\r\nif (journal) {\r\n  new Dialog({content: journal.data.content,\r\n            buttons: {ok: {label: \"Nice Talking\"}}}).render(true)\r\n}","folder":null,"sort":5800000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"Gtp76hbCnt8HSccz","name":"Toggle Iniative","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"/**\n * Takes all selected tokens and adds them to the combat tracker. Then rolls initiative for all NPC tokens.\n */\n\nasync function start() {\n  for ( let token of canvas.tokens.controlled) {      \n    if (token.inCombat === false){\n      // Change 'rollNPC' to 'rollAll' if you want to roll for your players as well.\n      await token.toggleCombat().then(() => game.combat.rollAll(null, {rollMode: 'gmroll'}));\n    }\n  }\n}\n\nstart();","folder":null,"sort":2100000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"H0nTY1XdbNHTzokm","name":"New Macro","type":"chat","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"for (let i = 0; i < 20; i++) {\n \n}\n\n\nconst pscene = game.scenes.contents.find(s => s.name === \"Bandit Fight 3\")\nif (pscene) {\n  const tokens = pscene.data.tokens.filter(t => t.data.actorId === \"5eNZ0Fu2o8y3aE9x\")\nlet start = 1800;\n  const moved = tokens.map((t, i) => {\n      return {x: start+((i+1)*pscene.dimensions.size), y: 2700+((i+1)*pscene.dimensions.size), _id: t.data._id}\n  });\n\n  pscene.updateEmbeddedDocuments('Token', moved)","folder":null,"sort":300000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"Ig0b6s4qZN9EkMPL","name":"PopFlexibleDialog","type":"script","author":"7dnqGCP7V37vnFvy","img":"icons/svg/dice-target.svg","scope":"global","command":"// Pass in two arguments\n// args[0] is an object with attributes content and buttons\n// content is stringified HTML content\n// buttons is buttons object eg. {ok: {label: \"Ok\"}}\nlet input = JSON.parse(args[0]);\nnew Dialog({content: input.content, buttons: input.buttons}).render(true)","folder":null,"sort":400000,"permission":{"default":0,"7dnqGCP7V37vnFvy":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"IlgfawUoUQzSsz2P","name":"Render Beyond Sheet","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.actors.getName(\"Dndbeyond\").sheet.render(true);","folder":null,"sort":2200000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Render Beyond Sheet","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"Ippt5Hr6W1gVaDqu","name":"dddddddd","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"await new Promise(r => setTimeout(r, 8400));\nconst macro = game.macros.getName(\"Dialog Wizard\");\nreturn macro.execute(\"You hit them!\", `/goto-scene \"Bandit Fight 3\"`);","folder":null,"sort":2300000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"dddddddd","colour":"#ff0000","trigger":""}},"furnace":{"runAsGM":false}}}
{"_id":"JT6cpjaeFZ9xwr92","name":"VolumeUp","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.settings.set(\"core\", \"globalPlaylistVolume\", 0.3);","folder":null,"sort":5900000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"JaCfg2PVPco0kERD","name":"PlayerIntPan","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.animatePan({duration: 2000, x: 1300, y: 700, scale: 1})","folder":null,"sort":6000000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"Jd1pWRLQCICwAGxS","name":"Resetting HP","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"game.actors.entities.find(a => a._id == \"w5Qf4kwypqlwhphu\").update({\"data.attributes.hp.value\": 10})","folder":null,"sort":7600000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"Jv8E3kXVvLHtWjH1","name":"Evil Dialog","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const journal = game.journal.entities.find(j => j.name === \"Help Bandit\")\nif (journal) {\n  new Dialog({content: journal.data.content,\n            buttons: {ok: {label: \"Let's make a move!\"}}}).render(true)\n}","folder":null,"sort":7700000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Evil Dialog","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"KIOUuAbf8nUE9ypy","name":"CanvasPanInterface","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.animatePan({duration: 2500, x: 4000, y: 2000, scale: 0.3})\nawait new Promise(r => setTimeout(r, 4400));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 3000, y: 720, scale: 0.7})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 2020, y: 1250, scale: 0.9})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 1800, y: 2800, scale: 0.8})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 3300, y: 3200, scale: 0.8})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 5400, y: 1120, scale: 0.5})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 3500, x: 3520, y: 2080, scale: 0.6})\nawait new Promise(r => setTimeout(r, 4600));\nif (canvas.scene.id !== scene.id) return;\ncanvas.animatePan({duration: 2500, x: 4000, y: 2000, scale: 0.3})\nawait new Promise(r => setTimeout(r, 4400));\nconst macro = game.macros.getName(\"Dialog Wizard\");\nreturn macro.execute(\"Interface - Overview End\", `/goto-scene \"Player interaction\"`);","folder":null,"sort":2400000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"CanvasPanInterface","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"KSuGbYhn42OOpQCs","name":"Piano5","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.play({src: \"worlds/forgevtt-demo-world/Assets/Music/Piano/Piano5.mp3\"}, args[1]);","folder":null,"sort":6100000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"Kw2v0eA9x52ubzby","name":"Sound Menu","type":"script","author":"v4D6J0stZeHgIwZb","img":"icons/svg/dice-target.svg","scope":"global","command":"let applyChanges = false;\nnew Dialog({\n  title: `Audio chosing form`,\n  content: `\n    <form>\n      <div class=\"form-group\">\n        <label>Canzone:</label>\n        <select id=\"idcanzone\" name=\"idcanzone\">\n          <option value=\"sounds/lock.wav\">door</option>\n          <option value=\"sounds/shiemmer.wav\">shiemmer</option>\n        </select>\n      </div>\n   \n        <div class=\"form-group\">\n        <label for=\"vol\">Volume:</label>\n           <div class=\"form-fields\">\n            <input type=\"range\" id=\"vol\" name=\"vol\" min=\"0\" max=\"8\" value=\"1\" step=\"0.2\" data-dtype=\"Number\">\n            <span class=\"range-value\" id=\"demo\">1</span>\n           </div>\n        </div>\n </form> \n<script>\nvar slider = document.getElementById(\"vol\");\nvar output = document.getElementById(\"demo\");\noutput.innerHTML = slider.value;\n\nslider.oninput = function() {\n  output.innerHTML = this.value;\n}\n</script>\n          `,\n  buttons: {\n    no: {\n      icon: \"<i class='fas fa-times'></i>\",\n      label: `Cancel Changes`\n        },\n    yes: {\n      icon: \"<i class='fas fa-check'></i>\",\n      label: `Apply Changes`,\n      callback: () => applyChanges = true\n         },\n           },\n  default: \"yes\",\n  close: html => {\n    if (applyChanges) {\n    let canzone= html.find('[name=\"idcanzone\"]')[0].value || \"none\";\n    let vol1= html.find('[name=\"vol\"]')[0].value || \"none\";\n    AudioHelper.play({src: canzone, volume:vol1, autoplay: true, loop: false}, true);\n                      }\n                 }\n  }).render(true);","folder":null,"sort":6200000,"permission":{"default":0,"v4D6J0stZeHgIwZb":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"LBImk1NPvtYaTF0G","name":"Combat Training 1","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const position = {x: 677, y: 718};\r\nconst moveCanvas = true;\r\n\r\nif (canvas.pings) {\r\n  const func = canvas.pings._getMousePos;\r\n  canvas.pings._getMousePos = () => {return position;};\r\n  canvas.pings._triggerPing(moveCanvas);\r\n  canvas.pings._getMousePos = func;\r\n}","folder":null,"sort":7800000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"M8CqNMzGGObg4GD3","name":"Store Singular Macro","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const macro = game.macros.get(\"NM6mWe58hiAHUNyd\");\nmacro.execute();\n\ngame.packs.get(\"world.store\").render(true);\n\nsetTimeout(dialog => {\n    const journal = game.journal.find(j => j.name === \"Drag and drop\")\n    if (journal) {\n    new Dialog({\n            content: journal.data.content,\n            buttons: {ok: {label: \"Ok\"}}\n        \n    }).render(true)\n    }\n}, 200)","folder":null,"sort":500000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"MKlj7PadEgIS2OHg","name":"New Macro","type":"chat","author":"bWT4RleWjkaYiYKA","img":"icons/svg/dice-target.svg","scope":"global","command":"/roll d20+d6+2","folder":null,"sort":7900000,"permission":{"default":0,"bWT4RleWjkaYiYKA":3},"flags":{}}
{"_id":"N7FtTEda3Tp27XzW","name":"PanMusic","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.animatePan({duration: 2000, x: 1300, y: 700, scale: 1})","folder":null,"sort":6300000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"NM6mWe58hiAHUNyd","name":"Render Sheet Ro Inventory","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"Hooks.once(\"renderActorSheet5eCharacter\", (s) => {\n    console.log(\"renderActorSheet5eCharacter\")\n    s._tabs[0].activate(\"inventory\");\n    s.render(true);\n});\ngame.actors.getName(\"Ro\").sheet.render(true);","folder":null,"sort":2500000,"permission":{"default":0},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"NgsGFIE1HtiAfG64","name":"Chosen Items","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"await new Promise(r => setTimeout(r, 21400));\nconst macro = game.macros.getName(\"Dialog with buttons\");\nreturn macro.execute(\"Got The Items\", `/goto-scene \"Bandit Fight\"`);","folder":null,"sort":2600000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Chosen Items","colour":"#ff0000","trigger":""}}}}
{"_id":"OPToLGDp1vEwRk4c","name":"Short Sword - weapon","type":"script","author":"UNdyZx25KsG4gz5I","img":"icons/svg/mystery-man.svg","scope":"global","command":"MinorQOL.doRoll(event, \"Short Sword\", {type: \"weapon\", versatile: false});","folder":null,"sort":8000000,"permission":{"default":0,"UNdyZx25KsG4gz5I":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"ORZWSiXiRvWW9xhD","name":"New Macro","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"TP.tokenPatroller.startPatrol(2: \"sN5QT4ada1q4pydD\")","folder":null,"sort":2700000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}}}
{"_id":"OgGEz8VhtNsr8AHb","name":"New Macro","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"/**\n   * A helper to prepare the speaker object based on a target Actor\n   * @private\n   */\n  static _getSpeakerFromActor({scene, actor, alias}) {\n    return {\n      scene: (scene || canvas.scene)?.id || null,\n      actor: actor.id,\n      token: null,\n      alias: alias || actor.name\n    }\n  }","folder":null,"sort":6400000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"OuhU94sPqtkcL9Nr","name":"hide-sidebar","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"$(\"#sidebar\").hide()","folder":null,"sort":10600000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"PMPSlzdWpSmSBVFE","name":"Clear Inventory","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.actors.get(\"SIYsggkrLxyCsXE7\").items.forEach(e => {e.delete()})","folder":null,"sort":2800000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"PaNhDChxeF8DDqmJ","name":"show-sidebar","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"$(\"#sidebar\").show()","folder":null,"sort":10700000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"Q9mqgcb2mHugpoYz","name":"Drawings","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"await canvas.scene.deleteEmbeddedDocuments(\"Drawing\", canvas.drawings.placeables.filter(o => o.document.isOwner && !o.document.getFlag(\"core\", \"tutorialFurniture\")).map(o => o.id), {})\n\ncanvas.templates.objects.children.forEach(e => {e.delete()})","folder":null,"sort":2900000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"QAlEWVDKEzeUQTkN","name":"New Macro","type":"script","author":"bWT4RleWjkaYiYKA","img":"icons/svg/dice-target.svg","scope":"global","command":"ui.notifications.warning(\"Hello\")","folder":null,"sort":6500000,"permission":{"default":0,"bWT4RleWjkaYiYKA":3},"flags":{}}
{"_id":"QSMvgi5FVeUorq8S","name":"Prison Pan To Ro","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.animatePan({duration: 2000, x: 2700, y: 2193, scale: 1})","folder":null,"sort":11500000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"RmjwXym90vrTji5l","name":"Add to do not touch list.","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.scene.updateManyEmbeddedEntities(\"Token\", canvas.tokens.placeables.map(t => {return {_id: t.data._id, \"flags.world.dontTouch\": true}}));","folder":null,"sort":8100000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"S6UBqGB7g6JxdDS0","name":"Move Canvas: 1500, 1500, true","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const position = {x: 1500, y: 1500};\r\nconst moveCanvas = true;\r\n\r\nif (canvas.pings) {\r\n  const func = canvas.pings._getMousePos;\r\n  canvas.pings._getMousePos = () => {return position;};\r\n  canvas.pings._triggerPing(moveCanvas);\r\n  canvas.pings._getMousePos = func;\r\n}","folder":null,"sort":8200000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"SFhHsDkPG8BueIbQ","name":"Reset Bandit Hp","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const banditTokenId = '8EdIT1rTFAjaQYc9';\nconst banditToken = canvas.scene.tokens.get(banditTokenId);\nawait banditToken.actor.applyDamage(-banditToken.actor.data.data.attributes.hp.max);","folder":null,"sort":600000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"SLtkVUrKH0i6q11d","name":"DeRenderStore","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.packs.get(\"world.store\").render(false);","folder":null,"sort":3000000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"DeRenderStore","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"SeC1yO1RF4ZyF9q5","name":"New Macro","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"const compendium_types = [\"Item\" /* ... and other entity types*/ ];\n\n(async ()=>{\n  let packs = game.packs.filter(p=> compendium_types.includes(p.entity))\n  let pack_choice = await choose (\n    packs.map(p=> ([p.collection, p.title])),\n    `Choose Compendium : `\n  );\n\n  let pack = packs.find(p=> p.collection === pack_choice);\n  let contents = await pack.getContent();\n\n  let choice = await choose (\n    contents.map(content=> ([content.id, content.name])),\n    `Choose Entity to Open : `\n  );\n\n  let entity = contents.find(content=> content.id === choice);\n\n  entity.sheet.render(true);\n})();\n\nasync function choose(options = [], prompt = ``)\n{\n  let value = await new Promise((resolve, reject) => {\n\n    let dialog_options = (options[0] instanceof Array)\n      ? options.map(o => `<option value=\"${o[0]}\">${o[1]}</option>`).join(``)\n      : options.map(o => `<option value=\"${o}\">${o}</option>`).join(``);\n  \n    let content = `${prompt}<br><select id=\"choice\">${dialog_options}</select>`;\n  \n    new Dialog({\n      content, \n      buttons : { OK : {label : `OK`, callback : async (html) => { resolve(html.find('#choice').val()); } } }\n    }).render(true);\n  });\n  return value;\n}","folder":null,"sort":3100000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"T39hRCH2Ozk4oUZU","name":"Restore token creation","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"if (game.demo_disallow_id) Hooks.off('preCreateToken', game.demo_disallow_id);\r\ngame.demo_disallow_id = 0;","folder":null,"sort":8300000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"THlEozDYdvmHruob","name":"Orcslayer","type":"chat","author":"UNdyZx25KsG4gz5I","img":"icons/svg/dice-target.svg","scope":"global","command":"/roll 1d4 Force Damage vs. Orc","folder":null,"sort":11100000,"permission":{"UNdyZx25KsG4gz5I":3},"flags":{}}
{"_id":"TRzh0FmJ5S18aKNB","name":"Reseting HP Tokens","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.tokens.placeables.find(t => t.id == \"WunYkf2ZRHAFfouI\").update({\"actorData.data.attributes.hp.value\": 10})","folder":null,"sort":8400000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"Tu27SXg668TmcI1X","name":"Disallow token creation","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"if (game.demo_disallow_id) Hooks.off('preCreatetoken', game.demo_disallow_id);\r\ngame.demo_disallow_id = Hooks.on(\"preCreateToken\", () => false);","folder":null,"sort":8500000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"UdWkKtGCMbzoQYh3","name":"Piano8","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.play({src: \"worlds/forgevtt-demo-world/Assets/Music/Piano/Piano8.mp3\"}, args[1]);","folder":null,"sort":6600000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"Ug4MR82bhQDZyF5P","name":"New Macro","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"let contents = await game.packs.get(\"world.ddd\").getContent();\ncontents.find(journal => journal.name == \"Armor\").show()","folder":null,"sort":3200000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"VldSbPIHtkl1xr0D","name":"fffff","type":"chat","author":"UNdyZx25KsG4gz5I","img":"icons/svg/dice-target.svg","scope":"global","command":"/r 1d20","folder":null,"sort":8600000,"permission":{"default":0,"UNdyZx25KsG4gz5I":3},"flags":{}}
{"_id":"ZKZImuJ8ODY6EkKR","name":"Render Default Sheet","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.actors.getName(\"Default\").sheet.render(true);","folder":null,"sort":3300000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Render Default Sheet","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"ZfT5VNiBNJR4DdTl","name":"Kevin test Attack Target","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"let weapon = game.actors.find(a => a.name === \"Ro\").items.find(i => i.name === \"Battleaxe\");\nlet weaponName = weapon.name;\nlet weaponIcon = weapon.img;\n\nlet targetToken = game?.user?.targets?.first();\n\nif (!targetToken) return new Dialog({\n    content: '<h3 style=\"text-align: center;\">You have to Target a token First</h3>',\n    buttons: {ok: {label: \"Ok\"}}\n}).render(true);\n\nconst weaponCallback = async (weapon,a,b,c,d,f) => {\n                    if (!weapon) return;\n                    console.log(weapon,a,b,c,d,f)\n                    // let myDmg = await weapon.rollDamage();\n                    // let dmgTotal = myDmg.total;\n                    // await targetToken.actor.applyDamage(dmgTotal);\n                    \n                    // let targetHp = targetToken?.actor?.data?.data?.attributes?.hp;\n                    // if (!targetHp) return;\n                    // if (targetHp.value <= targetHp.min) {\n                    //     console.log(\"Target died!\");\n                    //     const macro = game.macros.getName(\"Dialog Wizard\");\n                    //     //macro.execute(\"You hit them!\", `/goto-scene \"Bandit Fight 3\"`);\n                    // }\n                };\nChatMessage.create(\n    {\n        flavor: `<img src=\"${weaponIcon}\" width=\"50px\" height=\"50px\">`,\n        content: `<br><h3 style=\"text-align: center;\">Make an attack with your weapon!</h3>`,\n        //icon: weaponIcon,\n        buttons: {\n            button:{\n                \n                label: \"Attack\", \n                callback: async (weapon) => console.log(weapon)\n            }\n        }\n    })","folder":null,"sort":700000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"ZhYdN8YTzv5Ivt2B","name":"MusicProc","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"await new Promise(r => setTimeout(r, 400));\nconst macro = game.macros.getName(\"Dialog Wizard\");\nreturn macro.execute(\"MusicProc\", `/goto-scene \"Cave entrance\"`);","folder":null,"sort":3400000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"MusicProc","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"aWUGL8CLL38qhYul","name":"VolumeStop","type":"script","author":"v4D6J0stZeHgIwZb","img":"icons/svg/dice-target.svg","scope":"global","command":"game.settings.set(\"core\", \"globalPlaylistVolume\", 0.0);","folder":null,"sort":6700000,"permission":{"default":0,"v4D6J0stZeHgIwZb":3},"flags":{"combat-utility-belt":{"macroTrigger":""}}}
{"_id":"bEklzhOdY2LLbp4M","name":"Attack2","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"let itemName = \"Battleaxe\"\nlet item = actor.items.find(i=>i.name=== itemName)\nif (!item) ui.notifications.warn(`Your controlled Actor does not have an item named ${itemName}`);\nelse {\n    \nlet r2 = await item.rollDamage({event: {shiftKey: false}, chatMessage:false});\n\nlet r1 = await item.rollAttack({event: {shiftKey: false}, chatMessage:false});\n\nconsole.log(r2)\n\nconst html = [r1.render(), r2.render()]\n\nPromise.all(html).then(content => {\n  ChatMessage.create({\n    speaker: ChatMessage.getSpeaker(),\n    content: `<p>Roll 1 Description</p>${content[0]}<p>Roll 2 Description</p>${content[1]}`\n  });\n});\n}","folder":null,"sort":800000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"bfwwWMLDtnmKMejR","name":"Flag drawings","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"// Flag everything on the scene :\nawait canvas.scene.updateEmbeddedDocuments('Drawing', canvas.drawings.placeables.map(o => ({_id: o.id, \"flags.core.tutorialFurniture\": true})))\nconsole.log(\"bam\")","folder":null,"sort":3500000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"cbuVZx7edsalKzLe","name":"Music pause","type":"script","author":"NfNr0QNugVKiAAe4","img":"icons/svg/dice-target.svg","scope":"global","command":"let currentVolume = game.settings.get(\"core\", \"globalPlaylistVolume\");\ngame.settings.set(\"core\", \"globalPlaylistVolume\", 0.0);\n\nHooks.on(\"canvasReady\", () => {\nif (canvas.scene.name === \"Drawing scene\") {\ngame.settings.set(\"core\", \"globalPlaylistVolume\", currentVolume);\nconsole.log(\"Returned Volume Settings\")\n}\n})","folder":null,"sort":900000,"permission":{"default":0,"NfNr0QNugVKiAAe4":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"dvjI5GJuN1mRWnLf","name":"On Kill","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const journal = game.journal.entities.find(j => j.name === canvas.scene.name)\r\nif (journal) {\r\n  new Dialog({content: journal.data.content,\r\n            buttons: {ok: {label: \"Okay.\"}}}).render(true)\r\n}","folder":null,"sort":8700000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"dzhQIq81NFW2Y2MW","name":"Evil plan","type":"chat","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"Hey you there! Help me readying the cannons and brace for impact!\r\n\r\nWe are getting out of this hell-hole!\r\n\r\n<button type=\"button\">Help him</button>","folder":null,"sort":11600000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"ekcqlH2HkspMb2cy","name":"Prison move token back 2","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const scene = game.scenes.entities.find(s => s.name === \"Prison\")\r\nif (scene) {\r\n  const tokens = scene.data.tokens.filter(t => t.actorId === \"kqDYFf6b2XhD9x3u\" || t.actorId === \"JA08iGvKEELBIuYT\")\r\n  let start = 1800;\r\n  const moved = tokens.map(t => {\r\n    start += 100;\r\n    return mergeObject(t, {x: start, y: 1800}, {inplace: false});\r\n  });\r\n  scene.updateManyEmbeddedEntities('Token', moved)\r\n}","folder":null,"sort":8800000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"fgqDm60MUaY1d5OA","name":"goto-scene","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const targetScene = game.scenes.contents.find(s => s.name === args[0])\nif (targetScene)\n  return targetScene.view();","folder":null,"sort":10900000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"gBOD0RpdgEomkc9L","name":"Guard","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const pscene = game.scenes.contents.find(s => s.name === \"Prison\")\nif (pscene) {\n  const tokens = pscene.data.tokens.filter(t => t.data.actorId === \"bnhML89TuLIkcwAK\")\n  let start = 4130;\n  const moved = tokens.map((t, i) => {\n      return {x: start+((i+1)*pscene.dimensions.size), y: 2064+((i+1)*pscene.dimensions.size), _id: t.data._id}\n  });\n  pscene.updateEmbeddedDocuments('Token', moved)\n}","folder":null,"sort":8900000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"gFWhRZ2yVaF6oFHH","name":"pan-camera","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"// Pan the canvas camera to a position X and Y, in pixels.\r\n// Can also set the zoom level using the third optional argument.\r\n// Example: /pan-camera 1500\r\n// Example: /pan-camera 2500 2000 0.3\r\n\r\ncanvas.pan({x: args[0], y: args[1], scale: args[2]})","folder":null,"sort":3600000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"gOVlBlo3J2GKtG0H","name":"Render Tidy Sheet","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.actors.getName(\"Tidy\").sheet.render(true);","folder":null,"sort":3700000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Render Tidy Sheet","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"gS6mZjIS9kXmw7Z1","name":"Sounds","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"let applyChanges = false;\nnew Dialog({\n  title: `Audio chosing form`,\n  content: `\n    <form>\n      <div class=\"form-group\">\n        <label>Canzone:</label>\n        <select id=\"idcanzone\" name=\"idcanzone\">\n          <option value=\"sounds/lock.wav\">door</option>\n          <option value=\"sounds/shiemmer.wav\">shiemmer</option>\n        </select>\n      </div>\n   \n        <div class=\"form-group\">\n        <label for=\"vol\">Volume:</label>\n           <div class=\"form-fields\">\n            <input type=\"range\" id=\"vol\" name=\"vol\" min=\"0\" max=\"8\" value=\"1\" step=\"0.2\" data-dtype=\"Number\">\n            <span class=\"range-value\" id=\"demo\">1</span>\n           </div>\n        </div>\n </form> \n<script>\nvar slider = document.getElementById(\"vol\");\nvar output = document.getElementById(\"demo\");\noutput.innerHTML = slider.value;\n\nslider.oninput = function() {\n  output.innerHTML = this.value;\n}\n</script>\n          `,\n  buttons: {\n    no: {\n      icon: \"<i class='fas fa-times'></i>\",\n      label: `Cancel Changes`\n        },\n    yes: {\n      icon: \"<i class='fas fa-check'></i>\",\n      label: `Apply Changes`,\n      callback: () => applyChanges = true\n         },\n           },\n  default: \"yes\",\n  close: html => {\n    if (applyChanges) {\n    let canzone= html.find('[name=\"idcanzone\"]')[0].value || \"none\";\n    let vol1= html.find('[name=\"vol\"]')[0].value || \"none\";\n    AudioHelper.play({src: canzone, volume:vol1, autoplay: true, loop: false}, true);\n                      }\n                 }\n  }).render(true);","folder":null,"sort":6800000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"gXlkuJ6q13yi6E39","name":"Sound Cave Ro","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const scene = game.scenes.entities.find(s => s.name === \"Sound Cave\")\r\nif (scene) {\r\n  const tokens = scene.data.tokens.filter(t => t.actorId === \"SIYsggkrLxyCsXE7\")\r\n  let start = 1300;\r\n  const moved = tokens.map(t => {\r\n    start += 130;\r\n    return mergeObject(t, {x: start, y: 2100}, {inplace: false});\r\n  });\r\n  scene.updateManyEmbeddedEntities('Token', moved)\r\n}","folder":null,"sort":9000000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"gc0CRZH7B9DQzvOm","name":"Move Prison","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const position = {x: 2322, y: 2193};\r\nconst moveCanvas = true;\r\n\r\nif (canvas.pings) {\r\n  const func = canvas.pings._getMousePos;\r\n  canvas.pings._getMousePos = () => {return position;};\r\n  canvas.pings._triggerPing(moveCanvas);\r\n  canvas.pings._getMousePos = func;\r\n}","folder":null,"sort":9100000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"hDZ7Y5YR8Z9KYuvM","name":"Piano1","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.play({src: \"worlds/forgevtt-demo-world/Assets/Music/Piano/Piano1.mp3\"}, args[1]);","folder":null,"sort":6900000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"hkNs6afeMCku9Pys","name":"New Macro","type":"script","author":"8pIGCEozfXNtPyHL","img":"icons/svg/dice-target.svg","scope":"global","command":"AudioHelper.stop","folder":null,"sort":9200000,"permission":{"default":0,"8pIGCEozfXNtPyHL":3},"flags":{}}
{"_id":"ikXsBXe9RIgwSACy","name":"New Macro","type":"chat","author":"8pIGCEozfXNtPyHL","img":"icons/svg/dice-target.svg","scope":"global","command":"game.playlists.filter(p => p.playing).forEach(p => p.stopAll())","folder":null,"sort":9300000,"permission":{"default":0,"8pIGCEozfXNtPyHL":3},"flags":{}}
{"_id":"kQBClrfvXiMxG6nk","name":"New Macro","type":"chat","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"/Tiles 9yJg0wtGTJc8z3ig","folder":null,"sort":7000000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"kTF8vo0c25xd3uIQ","name":"Volume","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.settings.set(\"core\", \"globalPlaylistVolume\", args[0]);","folder":null,"sort":3800000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"kZ4G3jIVgA1eTmLK","name":"New Macro","type":"chat","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":3900000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{}}
{"_id":"ls3QDgPck91YwElW","name":"Welcome page: Move tokens back","type":"script","author":"8pIGCEozfXNtPyHL","img":"icons/svg/dice-target.svg","scope":"global","command":"const welcomeScene = game.scenes.entities.find(s => s.name === \"Welcome\")\r\nif (welcomeScene ) {\r\n  const tokens = welcomeScene .data.tokens.filter(t => t.actorId === \"TKjMwUtJxzcWlQzU\" || t.actorId === \"hK9pjpERnMx5O1Zg\")\r\n  let start = 1800;\r\n  const moved = tokens.map(t => {\r\n    start += 100;\r\n    return mergeObject(t, {x: start, y: 1800}, {inplace: false});\r\n  });\r\nconsole.log(moved)\r\n  welcomeScene .updateEmbeddedEntity('Token', moved)\r\n}","folder":null,"sort":9400000,"permission":{"8pIGCEozfXNtPyHL":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"mJKOiY0KF859W4nR","name":"Show image","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"for (let t of canvas.tiles.controlled) {\n    const popout = new ImagePopout(t.data.img).render(true);\n    popout.shareImage();\n}","folder":null,"sort":4000000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"nIsqk2ri4lnjujfe","name":"ensureBattleaxe","type":"script","author":"wODbChG0o5wNcQBZ","img":"icons/svg/dice-target.svg","scope":"global","command":"const t = canvas.tokens.placeables.find(t => t.id === \"931e8XCZZRAmPoxu\");\nif (!t || !t.actor) return;\nif (t.actor.items.find(i => i.name === \"Battleaxe\")) return;\nconst battleaxe = game.items.find(i => i.name === \"Battleaxe\");\nt.actor.addEmbeddedItems([battleaxe], false)","folder":null,"sort":1100000,"permission":{"default":0,"wODbChG0o5wNcQBZ":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"o0gTzABD4D6DAQ4H","name":"Dialog with buttons","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const journalName = args[0];\nconst next = args[1];\nconst journal = game.journal.find(j => j.name === journalName);\nif (!journal) console.log(`Missing journal: ${journalName}`);\nelse {\n    window.forge = window.forge || {};\n    window.forge.demoWorld = window.forge.demoWorld || {};\n    window.forge.demoWorld.itemsDone = window.forge.demoWorld.itemsDone || {waiting: false, displayed: false};\n    const dialogRepeater = {};\n\n    dialogRepeater.shouldDisplay = () => {\n        // return true;\n        return canvas.scene.id === \"ou8VfsnYBXDkiDBg\";\n    }\n\n    dialogRepeater.waitAndDisplay = () => {\n        if(!window.forge.demoWorld.itemsDone.waiting) {\n            window.forge.demoWorld.itemsDone.waiting = true;\n            window.forge.demoWorld.itemsDone.displayed = false;\n            // Render dialog in 10 seconds\n            setTimeout(() => {\n                dialogRepeater.display()\n            }, 10000);\n        }\n    };\n\n    dialogRepeater.display = () => {\n        if (!window.forge.demoWorld.itemsDone.displayed && dialogRepeater.shouldDisplay()) {\n            window.forge.demoWorld.itemsDone.displayed = true;\n            window.forge.demoWorld.itemsDone.waiting = false;\n            dialogRepeater.dialog.render(true);\n        }\n    }\n\n    dialogRepeater.dialog = new Dialog({\n        content: journal.data.content,\n        buttons: {\n            next: {\n                label: \"Continue to the next Scene\",\n                callback: () => {\n                    window.forge.demoWorld.itemsDone.waiting = true;  // Prevent close from reopening the dialog\n                    window.forge.demoWorld.itemsDone.displayed = false;\n                    ChatMessage.create({content: next})\n                }\n            },\n            wait: {\n                label: \"Wait!\",\n                callback: dialogRepeater.waitAndDisplay\n            }\n        },\n        close: dialogRepeater.waitAndDisplay\n    });\n\n    // Display for the first time\n    dialogRepeater.display();\n}","folder":null,"sort":1200000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"o3aQeXcEIqRi0jpi","name":"PopMessage","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"const journal = game.journal.find(j => j.name === args[0])\nif (journal) {\n  new Dialog({content: journal.data.content,\n            buttons: {ok: {label: \"Ok\"}}}).render(true)\n}","folder":null,"sort":4100000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"oNVeUx3TqizODe1w","name":"Battleaxe","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/weapons/polearms/halberd-crescent-engraved-steel.webp","scope":"global","command":"game.dnd5e.rollItemMacro(\"Battleaxe\");","folder":null,"sort":4200000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"qtSI82KzqAb6GYPP","name":"Boom","type":"chat","author":"bWT4RleWjkaYiYKA","img":"icons/svg/dice-target.svg","scope":"global","command":"/roll 15d10+40","folder":null,"sort":9500000,"permission":{"default":0,"bWT4RleWjkaYiYKA":3},"flags":{}}
{"_id":"rFzE0TigpuX81pTp","name":"Hey","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"let buttonStuff = [{\n    label:\"name\",\n    buttonText: \"Raaah\",\n    action: console.log(\"here\")\n},\n{\n    label:\"name3\",\n    buttonText: \"Diiii\",\n    action: console.log(\"there\")\n},\n{\n    label:\"name2\",\n    buttonText: \"Daaah\",\n    action: console.log(\"mere\")\n}\n]\n\nconst journalName = \"proceed 1\"\nconst buttons = {};\n\nbuttonStuff.map(arg => {\n    buttons[arg.label] = {\n        label: arg.buttonText, \n        callback: arg.action\n    };\n})\n\nconst journal = game.journal.find(j => j.name === journalName)\nif (journal) {\n\n    new Dialog({\n        content: journal.data.content,\n        buttons: buttons,\n        close: undefined\n    }).render(true)\n}","folder":null,"sort":1300000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"rKmHs6LsBtDjPDhK","name":"New Macro","type":"script","author":"bWT4RleWjkaYiYKA","img":"icons/svg/dice-target.svg","scope":"global","command":"let tokens = []\r\nfor (let token of canvas.tokens.placeables) {\r\n   tokens.push({_id: token.id, \"bar1.attribute\": \"attributes.hp\", \"bar2.attribute\": \"\", \"displayName\": CONST.TOKEN_DISPLAY_MODES.ALWAYS, \"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS})\r\n}\r\n\r\nif (tokens.length > 0)\r\n  canvas.scene.updateManyEmbeddedEntities('Token', tokens)","folder":null,"sort":9600000,"permission":{"bWT4RleWjkaYiYKA":3},"flags":{}}
{"_id":"rMOgmYRkV0AZ1sjc","name":"move-token","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"// This macro requires the advanced macros of Furnace\r\n// Takes X and Y as arguments and an optional third argument, if set to true, will disable move animation\r\nconst x = args[0];\r\nconst y = args[1];\r\nconst noAnimate = args[2];\r\n\r\nif (!token) return;\r\nif (noAnimate) token._noAnimate = true;\r\nawait token.update({x, y})\r\ntoken._noAnimate = false;","folder":null,"sort":9700000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"re9E57beHQoKLP62","name":"Move in Character Creation","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const position = {x: 1000, y: 576};\r\nconst moveCanvas = true;\r\n\r\nif (canvas.pings) {\r\n  const func = canvas.pings._getMousePos;\r\n  canvas.pings._getMousePos = () => {return position;};\r\n  canvas.pings._triggerPing(moveCanvas);\r\n  canvas.pings._getMousePos = func;\r\n}","folder":null,"sort":9800000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"soYqRH4LESGlMYXS","name":"Chatmessage Create","type":"script","author":"7dnqGCP7V37vnFvy","img":"icons/svg/dice-target.svg","scope":"global","command":"const dialog = new Dialog({\n        content: journal.data.content,\n        buttons: {\n            attack: {\n                label: \"Attack\",\n                callback: () => {\n                    let r = new Roll(`1d20`);\n                    ChatMessage.roll(r);\n                }\n            },\n            wait: {\n                label: \"Wait!\",\n                callback: () => ChatMessage.create(\"Waiting\")\n            }\n        },\n        close: waitLoop\n    });","folder":"bHVMMWIpvzR8uKku","sort":100000,"permission":{"default":0,"7dnqGCP7V37vnFvy":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"sz0vrFkITKhgCAFq","name":"Quantity","type":"script","author":"NfNr0QNugVKiAAe4","img":"icons/svg/dice-target.svg","scope":"global","command":"//game.actors.get(\"SIYsggkrLxyCsXfg\").items.get(\"QJBdpsNROImvl54y\").data.data.quantity += 1\n\n// The Name Of the Actor to Affect\nlet thePlayer = game.actors.find(a => a.name === \"Ro\");\n//The Name of the Item you want to remove one from\nlet theItem = thePlayer.items.find(i => i.name === \"Arrows\");\n//The Current Quantity of the Item\nlet itemQuantity = theItem.data.data.quantity;\n// The  Amount you want to remove from the Item.\nlet theNumber = itemQuantity - 1;\n\ntheItem.update( {data: {quantity:theNumber}})","folder":null,"sort":1400000,"permission":{"default":0,"NfNr0QNugVKiAAe4":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"tUTfrg7q9j6BIjzy","name":"MoveToken","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"const pscene = game.scenes.contents.find(s => s.name === args[0])\nif (pscene) {\n  const tokens = pscene.data.tokens.filter(t => t.data.actorId === \"SIYsggkrLxyCsXE7\")\n  let start = args[1];\n  const moved = tokens.map(t => {\n    start += 100;\n    return {_id: t.data._id, x: start, y: args[2]};\n  });\n  pscene.updateEmbeddedDocuments('Token', moved, {animate: false})\n}","folder":null,"sort":4300000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"MoveToken","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"tYJOFvIPAkoVTfu5","name":"Guard HP remove","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"game.scenes.entities.find(s => s.name === \"Combat training\").updateEmbeddedEntity('Token', {_id: \"ZsYg9w7oiCjMBMNs\", \"bar1.attribute\": \"\", \"bar2.attribute\": \"\", \"displayName\": CONST.TOKEN_DISPLAY_MODES.ALWAYS, \"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS})","folder":null,"sort":9900000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"tYNdTJ5tMjpkpC48","name":"New Macro","type":"chat","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":4400000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{}}
{"_id":"tcY8otE6RU1FvYBv","name":"New Macro","type":"script","author":"bWT4RleWjkaYiYKA","img":"icons/svg/dice-target.svg","scope":"global","command":"game.playlists.filter(p => p.playing).forEach(p => p.stopAll())","folder":null,"sort":10000000,"permission":{"default":0,"bWT4RleWjkaYiYKA":3},"flags":{}}
{"_id":"tlNPEJQzFCsnheuP","name":"Store2","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"game.packs.get(\"world.goods\").render(true);","folder":null,"sort":4500000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"uM8SIJXgsKZNZcFe","name":"Hp Macro","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"let tokens = []\r\nfor (let token of canvas.tokens.placeables) {\r\n   tokens.push({_id: token.id, \"bar1.attribute\": \"attributes.hp\", \"bar2.attribute\": \"\", \"displayName\": CONST.TOKEN_DISPLAY_MODES.ALWAYS, \"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS})\r\n}\r\n\r\nif (tokens.length > 0)\r\n  canvas.scene.updateManyEmbeddedEntities('Token', tokens)","folder":null,"sort":10100000,"permission":{},"flags":{}}
{"_id":"urfRSBPtBdpqc8mn","name":"New Macro","type":"script","author":"bWT4RleWjkaYiYKA","img":"icons/svg/dice-target.svg","scope":"global","command":"1s20","folder":null,"sort":10200000,"permission":{"default":0,"bWT4RleWjkaYiYKA":3},"flags":{}}
{"_id":"v2PokWLSLEmkIbgT","name":"Prison move tokens Back","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"const pscene = game.scenes.contents.find(s => s.name === \"Prison\")\nif (pscene) {\n  const tokens = pscene.data.tokens.filter(t => t.data.actorId === \"SIYsggkrLxyCsXE7\")\n  let start = 2200;\n  const moved = tokens.map(t => {\n    start += 100;\n    return {x: start, y: 2193, _id: t.data._id}\n  });\n  pscene.updateEmbeddedDocuments('Token', moved)\n}","folder":null,"sort":11400000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false},"advanced-macros":{"runAsGM":false}}}
{"_id":"vFzfIZGwfTPZ7V9F","name":"TalkScenePass","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"await new Promise(r => setTimeout(r, 400));\nconst macro = game.macros.getName(\"Dialog Wizard\");\nreturn macro.execute(\"Bandit 4\", `/goto-scene \"Sound music\"`);","folder":null,"sort":4600000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"TalkScenePass","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"w8pnc2eyjovPQ28i","name":"MEGA FEAT","type":"script","author":"bWT4RleWjkaYiYKA","img":"icons/svg/mystery-man.svg","scope":"global","command":"game.dnd5e.rollItemMacro(\"MEGA FEAT\");","folder":null,"sort":10300000,"permission":{"default":0,"bWT4RleWjkaYiYKA":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"wEpH5FM6b2sDTjGZ","name":"Item wizard","type":"script","author":"xNLNbjSIPRGFvxDB","img":"icons/svg/dice-target.svg","scope":"global","command":"const journalName = args[0];\nconst next = args[1];\n\nconst journal = game.journal.entities.find(j => j.name === journalName)\nif (journal) {\n  const buttons = {};\n  if (next) {\n    buttons[\"Next\"] = {label: \"Next\", callback: () => {\n        ChatMessage.create({content: next})\n    }};\n}","folder":null,"sort":4700000,"permission":{"default":0,"xNLNbjSIPRGFvxDB":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}}}
{"_id":"wg8eFxpVcgewRvsu","name":"Move camera","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"canvas.pan({x: 1200, y:900, scale: 0.7})","folder":null,"sort":10400000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{}}
{"_id":"wo4fenoHstYwiEqo","name":"Transition2","type":"script","author":"gF1vZZTOiYU8S98e","img":"icons/svg/dice-target.svg","scope":"global","command":"Transition.macro({\n\tsceneID: false,\n\tcontent:args[0],\n\tfontColor:'#ffffff',\n\tfontSize:'28px',\n\tbgImg:args[1], // pass any relative or absolute image url here.\n\tbgPos:'center center',\n\tbgSize:'cover',\n\tbgColor:'#333333',\n\tbgOpacity:0.7,\n\tfadeIn: 400, //how long to fade in\n\tdelay:20000, //how long for transition to stay up\n\tfadeOut: 400, //how long to fade out\n\taudio: \"\", //path to audio file\n\tskippable:true, //Allows players to skip transition with a click before delay runs out.\n\tgmHide: true, // hide the transistion on other windows logged in as a GM\n\tgmEndAll: true, // whwn the fm clicks to end the transition - end for everyone\n\n}, true )","folder":null,"sort":4800000,"permission":{"default":0,"gF1vZZTOiYU8S98e":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}}}}
{"_id":"xkFQDtSRjKdCJQsi","name":"New Weapon - weapon","type":"script","author":"KBX0COjkbKobR8W7","img":"icons/svg/mystery-man.svg","scope":"global","command":"MinorQOL.doRoll(event, \"New Weapon\", {type: \"weapon\", versatile: false});","folder":null,"sort":10500000,"permission":{"default":0,"KBX0COjkbKobR8W7":3},"flags":{"dnd5e":{"itemMacro":true}}}
{"_id":"yUlSqozYscIEOGz1","name":"Play Guitar","permission":{"FRJk2q4bH9IdLZDf":3},"type":"script","sort":6300000,"flags":{},"scope":"global","command":"AudioHelper.play({src: [\"worlds/forgevtt-demo-world/Assets/Music/Guitar 2.mp3\"]}, args[0]);","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"yWQdmDSHn6H3MQ2h","name":"play-audio","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"/* This macro requires the advanced macros of Furnace\r\n * This will play audio from a URL\r\n * Takes the URL of the audio file as its first argument\r\n * The second argument, if set to true, will play the audio for every other player too.\r\n * Example: /play-audio \"https://example.com/sound-effects/explosion.mp3\" true\r\n */\r\nconst url = args[0];\r\nconst push = args[1];\r\n\r\nAudioHelper.play({src: [url]}, push);","folder":null,"sort":1500000,"permission":{"FRJk2q4bH9IdLZDf":3},"flags":{"core":{"sourceId":"Compendium.advanced-macros.macros.yUlSqozYscIEOGz1"}}}
{"_id":"zr4A9305Wr2ARGhs","name":"New Macro","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"function Pinger_ping(ip, callback) {\r\n\r\n  if(!this.inUse) {\r\n\r\n    this.inUse = true;\r\n    this.callback = callback\r\n    this.ip = ip;\r\n\r\n    var _that = this;\r\n\r\n    this.img = new Image();\r\n\r\n    this.img.onload = function() {_that.good();};\r\n    this.img.onerror = function() {_that.good();};\r\n\r\n    this.start = new Date().getTime();\r\n    this.img.src = \"http://\" + ip;\r\n    this.timer = setTimeout(function() { _that.bad();}, 1500);\r\n\r\n  }\r\n}","folder":null,"sort":7100000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"furnace":{"runAsGM":false}}}
{"_id":"9nSsInN6YyMQArGo","name":"Attack Target Token Automate","type":"script","author":"FRJk2q4bH9IdLZDf","img":"icons/svg/dice-target.svg","scope":"global","command":"// Attack Target Token Automate\nwindow.forge = window.forge || {};\nwindow.forge.demoWorld = window.forge.demoWorld || {};\nwindow.forge.demoWorld.roWeapon = args[0];\nconst targetToken = window.forge.demoWorld.roTarget = game?.user?.targets?.first();\nconst popFlexibleDialog = game.macros.find(x => x.name === `PopFlexibleDialog`);\nif (!popFlexibleDialog) console.error(\"Missing macro PopFlexibleDialog\");\n\nif (targetToken?.data?.actorId !== \"Voo7V2dvjq8OB72O\") {\n    popFlexibleDialog.execute(JSON.stringify({\n        content: `<h3 style=\"text-align: center;\">Please select a${!targetToken?.data?.actorId ? '' : ' closer'} target!</h3>`,\n        buttons: {ok: {label: \"Ok\"}}\n    }));\n    window.forge.demoWorld.roTarget = null;\n} else {\n    popFlexibleDialog.execute(JSON.stringify({\n        content: `<h3 style=\\\"text-align: center;\\\">${args[1] || 'Check the chat!'}</h3>`,\n        buttons: {ok: {label: \"Ok\"}}\n    }));\n    ui.sidebar.activateTab('chat');\n    ui.sidebar.expand();\n\n    ChatMessage.create({\n        flavor: `<div class=\"bootleg-item-card\"><img src=\"${window.forge?.demoWorld?.roWeapon.data?.img}\" width=\"50px\" height=\"50px\" /><h3>${window.forge?.demoWorld?.roWeapon.data?.name}</h3></div>`,\n        content: \"<br /><h3 style=\\\"text-align:center\\\">Make an attack with your weapon!</h3><br />\",\n        buttons: {\n            button: {\n                intendedCanvas: \"hello\",\n                label: \"Attack\",\n                callback: async () => {\n                    if (game.userId !== this.user.id) {\n                        ChatMessage.create({\n                            content: \"This button does not belong to you.\",\n                            whisper: [game.userId]\n                        })\n                        return;\n                    }\n                    if (canvas.scene.id !== 'qE9GgC174smk0aPF') {\n                        ChatMessage.create({\n                            content: \"This is not the correct scene for that.\",\n                            whisper: [game.userId]\n                        })\n                        return;\n                    }\n                    await this.delete();\n                    if (!window.forge?.demoWorld?.roWeapon\n                        || window.forge?.demoWorld?.roTarget?.data?.actorId !== \"Voo7V2dvjq8OB72O\") {\n                        ChatMessage.create({\n                            content: \"Please click on the weapon icon in your inventory first.\",\n                            whisper: [game.userId]\n                        })\n                        return;\n                    }\n                    const weapon = window.forge?.demoWorld?.roWeapon;\n                    if (weapon.hasAttack) await weapon.rollAttack();\n                    if (!weapon.hasDamage) {\n                        ChatMessage.create({\n                            content: \"Please select a weapon that can deal some damage!\",\n                            whisper: [game.userId]\n                        })\n                        return;\n                    }\n                    ChatMessage.create({\n                        flavor: `<div class=\"bootleg-item-card\"><img src=\\\"${weapon.data?.img}\\\" width=\\\"50px\\\" height=\\\"50px\\\" /><h3>${weapon.data?.name}</h3></div>`,\n                        content: \"<br /><h3 style=\\\"text-align:center\\\">You hit them! Go ahead and roll damage.</h3><br />\",\n                        buttons: {\n                            button: {\n                                label: \"Damage\",\n                                callback: async () => {\n                                    if (game.userId !== this.user.id) {\n                                        ChatMessage.create({\n                                            content: \"This button does not belong to you.\",\n                                            whisper: [game.userId]\n                                        })\n                                        return;\n                                    }\n                                    if (canvas.scene.id !== 'qE9GgC174smk0aPF') {\n                                        ChatMessage.create({\n                                            content: \"This is not the correct scene for that.\",\n                                            whisper: [game.userId]\n                                        })\n                                        return;\n                                    }\n                                    await this.delete();\n                                    if (!window.forge?.demoWorld?.roWeapon\n                                        || window.forge?.demoWorld?.roTarget?.data?.actorId !== \"Voo7V2dvjq8OB72O\") {\n                                        ChatMessage.create({\n                                            content: \"Please click on the weapon icon in your inventory first.\",\n                                            whisper: [game.userId]\n                                        })\n                                        return;\n                                    }\n                                    const weapon = window.forge?.demoWorld?.roWeapon;\n                                    const targetToken = window.forge?.demoWorld?.roTarget;\n                                    let myDmg = await weapon.rollDamage();\n                                    let dmgTotal = myDmg.total;\n                                    await targetToken.actor.applyDamage(dmgTotal);\n                                    let targetHp = targetToken?.actor?.data?.data?.attributes?.hp;\n                                    if (!targetHp) return;\n                                    if (targetHp.value <= targetHp.min) {\n                                        console.log(\"Target died!\");\n                                        const macro = game.macros.getName(\"Dialog Wizard\");\n                                        macro.execute(\"You hit them!\", `/goto-scene \"Bandit Fight 3\"`);\n                                    } else {\n                                        const attackMacro = game.macros.find(x => x.name === `Attack Target Token Automate`);\n                                        attackMacro.execute(window.forge.demoWorld.roWeapon, `You've done <b style=\"color: darkred\">${dmgTotal}</b> damage but your target is still up, hit them again!`)\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n            }\n        }\n    });\n}","folder":null,"sort":100000,"permission":{"default":0,"FRJk2q4bH9IdLZDf":3},"flags":{"advanced-macros":{"runAsGM":false}}}
{"_id":"wo4fenoHstYwiEqo","name":"Transition2","type":"script","author":"gF1vZZTOiYU8S98e","img":"icons/svg/dice-target.svg","scope":"global","command":"Transition.macro({\n\tsceneID: false,\n\tcontent:args[0],\n\tfontColor:'#ffffff',\n\tfontSize:'28px',\n\tbgImg:args[1], // pass any relative or absolute image url here.\n\tbgPos:'center center',\n\tbgSize:'cover',\n\tbgColor:'#333333',\n\tbgOpacity:0.7,\n\tfadeIn: 400, //how long to fade in\n\tdelay:20000, //how long for transition to stay up\n\tfadeOut: 400, //how long to fade out\n\taudio: \"\", //path to audio file\n\tskippable:true, //Allows players to skip transition with a click before delay runs out.\n\tgmHide: true, // hide the transistion on other windows logged in as a GM\n\tgmEndAll: true, // whwn the fm clicks to end the transition - end for everyone\n\n}, false )","folder":null,"sort":4800000,"permission":{"default":0,"gF1vZZTOiYU8S98e":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}}}}
